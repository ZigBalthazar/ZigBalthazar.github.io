<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  {{- $title := .Title -}}
  {{- if .IsHome -}}
    {{- $title = $.Site.Title -}}
  {{- end -}}
  {{- $description := "" -}}
  {{- if .IsPage -}}
    {{- $description = .Params.description | default .Summary -}}
  {{- else -}}
    {{- $description = $.Site.Params.description | default $.Site.Title -}}
  {{- end -}}
  {{- $description = $description | plainify | htmlUnescape -}}

  <title>{{ $title }}</title>
  {{- if $description -}}<meta name="description" content="{{ $description }}" />{{- end }}
  {{- with $.Site.Params.author -}}<meta name="author" content="{{ . }}" />{{- end }}
  <link rel="canonical" href="{{ .Permalink }}" />

  <meta property="og:site_name" content="{{ $.Site.Title }}" />
  <meta property="og:title" content="{{ $title }}" />
  {{- if $description -}}<meta property="og:description" content="{{ $description }}" />{{- end }}
  <meta property="og:url" content="{{ .Permalink }}" />
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="{{ $title }}" />
  {{- if $description -}}<meta name="twitter:description" content="{{ $description }}" />{{- end }}

  {{- with .OutputFormats.Get "RSS" -}}
  <link rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" href="{{ .RelPermalink }}" />
  {{- end }}

  {{- with $.Site.Params.favicon -}}
  <link rel="shortcut icon" type="image/x-icon" href="{{ . | relURL }}" />
  {{- end }}
  {{ $options := (dict "outputStyle" "compressed" "enableSourceMap" (not hugo.IsProduction)) }}
  {{ $sass := resources.Get "css/main.scss" }}
  {{ $style := $sass | css.Sass $options | resources.Fingerprint "sha512" }}
  <link rel="stylesheet" href="{{ $style.Permalink | relURL }}" integrity="{{ $style.Data.Integrity }}" />
  {{ if .Params.mathjax }} {{ partial "mathjax.html" . }} {{ end }}
</head>
